# 客户端整体运行路径

<img src=".\README.assets\my_TypeWriting流程图.png" alt="my_TypeWriting流程图" style="zoom: 67%;" />

关键点：keyborad中对字符的处理，按键颜色和字符格式的处理以及更新文件的处理

### 整体修改改进处：

1、全部文件存在本地文件夹中，并通过明文保存。可通过增加mysql数据库的方式对文件进行导入，并保存用户数据

2、可以展示登入界面，多人在线登入，并进行打字练习

3、增加多线程对打字数据进行监控，保证能够及时准确的弹出打字练习的错误窗口

### 改进方式：

1、建立网络通讯，完成客户端与服务器的网络通讯方式。

- 学习qt网络通讯 API 方式
- 保存部分信息在文件中，待打字材料信息材料信息。

## 客户端业务流程

1、打开软件，第一个界面为登入界面

> 需要有个注册界面

2、登入界面打开后自动与服务器建立连接

- 发送消息格式Http格式，长连接

3、输入账号、密码

> 服务器：检测通过输入的密码后返回可供使用的打字文档目录（服务器需要存在一个专门存储目录的位置）

4、客户端：如果账号密码正确，打开第一个界面 -> 包含很多可练习文档条目 + 单个条目个人打字记录

5.1、点击练习目录，进入 KeyBoard 界面，

- 子线程接收数据，并将数据写入到当前编程文件中
- KeyBoard 界面开始读取文件中的数据，并显示一行在界面中
- 练习结束后将打字练习结果发送给服务端

> 服务端将数据处理后加入到个人打字信息列表中

5.2、点击单个条目个人记录，

- 子线程想服务端请求个人打字信息，并将请求到的数据写入到某个文件列表中
- 界面主线程读取文件信息，并显示在列表页上

备注：

> 每次需要请求的界面出现时，都向服务器请求数据。

> 不考虑网络不好的情况

### 登入界面

<img src=".\README.assets\image-20230727195409572.png" alt="image-20230727195409572" style="zoom:67%;" />

要求：有背景，有软件登入界面说明，有账号，密码，是否记住密码，登入按钮，注册按钮

功能：

1、检测账号密码输入是否为空

2、调用 socket 连接

3、接收到服务器发过来的消息后，进入 练习子界面

### 注册界面

<img src=".\README.assets\image-20230727200306084.png" alt="image-20230727200306084" style="zoom: 67%;" />

要求：有背景，账号和密码检测，注册按钮

功能：

1、检测注册账号和密码格式是否正确

2、调用socket连接

3、接收到注册成功消息后关闭窗口进入登入界面

### ClientConn 建立连接和管理连接

要求：封装连接，只有一个实例，完成与server连接功能

功能：

1、能够主动与服务器建立连接，能够完成与服务器

2、程序打开自动调用子线程运行

3、从主机读到得信息并放入缓冲区中 （是否需要建立一个消息池用于与不同窗口通行）

4、提供通讯接口，转发消息，并将接收到的消息发送给调用者

细分功能：

有一个初始化函数、写数据槽、读数据槽、关闭槽

**思考问题1**：使用单例模式，表示只有一个实例，那么在整个程序运行过程中都只有这一个实例提供 tcp 连接服务，如果连接失败，一直等待。

**思考问题2**：这个实例需要提供什么可用接口？

提供创建接口，提供写入数据接口，读取数据并将数据写入某个文件中或者内存某个地方。需要提供不同写入方式。

**思考问题3**：有哪些数据需要通过服务器获取？有哪些信息发送给服务器？

发送的信息：注册信息，登入信息、请求的打字文件目录、请求的打字文件数据、请求的单个打字排名数据

获取的信息：注册成功信息、登入成功信息、响应的打字目录文件、响应的打字文件数据，响应的打字排名数据

**思考问题4**：这些数据的协议是什么？

都采用不完整的 http 格式吧

请求行 + 消息头  消息体

<img src="F:\2、项目资料与论文\3-打字程序软著\my_TypeWriting\README.assets\image-20230802215415867.png" alt="image-20230802215415867" style="zoom: 50%;" />

<img src="F:\2、项目资料与论文\3-打字程序软著\my_TypeWriting\README.assets\image-20230802215246637.png" alt="image-20230802215246637" style="zoom: 50%;" />

<img src="F:\2、项目资料与论文\3-打字程序软著\my_TypeWriting\README.assets\image-20230802215350292.png" alt="image-20230802215350292" style="zoom:50%;" />
